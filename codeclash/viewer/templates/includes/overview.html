<!-- Overview Section -->
<section class="overview-section">
    <h2>ðŸ“Š Overview</h2>

    <div class="overview-summary">
        <table class="results-table">
            <thead>
                <tr>
                    <th>Round</th>
                    <th>Winner</th>
                    <th>Results</th>
                    {% for trajectory in trajectories_by_round.get(1, []) %}
                        <th>Player {{ trajectory.player_id }} Steps</th>
                    {% endfor %}
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for round_data in metadata.rounds %}
                    <tr>
                        <td>{{ round_data.round_num }}</td>
                        <td>
                            {% if round_data.results and round_data.results.winner %}
                                <span class="winner-badge">{{ round_data.results.winner }}</span>
                                {% if round_data.results.winner_percentage %}
                                    <span class="winner-percentage">({{ round_data.results.winner_percentage }}%)</span>
                                {% endif %}
                                {% if round_data.results.p_value is not none %}
                                    <span class="p-value">(p={{ "%.2f"|format(round_data.results.p_value) }})</span>
                                {% endif %}
                            {% else %}
                                <span class="no-result">-</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if round_data.results and round_data.results.sorted_scores %}
                                <div class="score-breakdown">
                                    {% for player, score in round_data.results.sorted_scores %}
                                        <span class="score-item">{{ player }}: {{ score }}</span>
                                    {% endfor %}
                                </div>
                            {% else %}
                                <span class="no-result">-</span>
                            {% endif %}
                        </td>
                        {% if trajectories_by_round.get(round_data.round_num) %}
                            {% for trajectory in trajectories_by_round[round_data.round_num] %}
                                <td>
                                    <span class="steps-count">{{ trajectory.api_calls }}</span>
                                </td>
                            {% endfor %}
                        {% else %}
                            {% for trajectory in trajectories_by_round.get(1, []) %}
                                <td><span class="no-result">-</span></td>
                            {% endfor %}
                        {% endif %}
                        <td>
                            {% if metadata.agent_info %}
                                <div class="models-cell">
                                    {% for agent in metadata.agent_info %}
                                        {% if agent.model_name %}
                                            <span class="model-tag">{{ agent.model_name }}</span>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            {% else %}
                                <span class="no-result">-</span>
                            {% endif %}
                        </td>
                        <td>
                            <button class="nav-to-round-btn" data-round="{{ round_data.round_num }}" title="Jump to Round {{ round_data.round_num }} details">
                                <span class="nav-arrow">â†“</span>
                            </button>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>
